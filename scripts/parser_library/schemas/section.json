{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"title": "Section",
	"description": "Semesterly Section JSON definition",
	"type": "object",
	"properties": {
		"kind": {
			"enum": ["section"]
		},
		"school": {
			"allOf": [
				{
					"$ref": "definitions.json#/school"
				}
			],
			"properties": {
				"code": {}
			},
			"additionalProperties": false,
			"required": [ "code" ]
		},
		"course": {
			"allOf": [
				{
					"$ref": "course.json#/"
				}
			],
			"properties": {
				"code": {}
			},
			"additionalProperties": false,
			"required": [ "code" ]
		},
		"code": {
			"type": "string"
		},
		"term": {
			"type": "string"
		},
		"year": {
			"allOf": [
				{
					"$ref": "definitions.json#/year"
				}
			]
		},
		"capacity": {
			"type": "integer"
		},
		"enrollment": {
			"type": "integer"
		},
		"waitlist": {
			"type": "integer"
		},
		"waitlist_size": {
			"type": "integer"
		},
		"remaining_seats": {
			"type": "integer"
		},
		"type": {
			"type": "string",
			"minLength": 1
		},
		"fees": {
			"oneOf": [
				{
					"type": "string",
					"pattern": "\\d+(?:.\\d{1,2})?"
				},
				{
					"type": "number",
					"minimum": 0
				}
			]
		},
		"instructors": {
			"type": "array",
			"items": {
				"oneOf": [
					{
						"type": "string"
					},
					{
						"allOf": [
							{
								"$ref": "instructor.json#/"
							}
						],
						"properties": {
							"name": {},
							"email": {},
							"homepage": {},
							"title": {}
						},
						"additionalProperties": false
					}
				]
			}
		},
		"final_exam": {
			"allOf": [
				{
					"$ref": "final_exam.json#/"
				}	
			],
			"properties": {
				"meeting": {}
			},
			"additionalProperties": false
		},
		"textbooks": {
			"type": "array",
			"items": {
				"allOf": [
					{
						"$ref": "textbook.json#/"
					}
				],
				"properties": {
					"isbn": {},
					"title": {},
					"author": {}
				},
				"additionalProperties": false
			}
		},
		"meetings": {
			"type": "array",
			"items": {
				"allOf": [
					{
						"$ref": "meeting.json#/"
					}
				],
				"properties": {
					"dates": {},
					"days": {},
					"time": {},
					"location": {},
					"course": {},
					"section": {}
				},
				"additionalProperties": false,
				"required": [ 
					"time",
					"course",
					"section"
				]
			}
		}
	},
	"required": [
		"code"
	]
}
